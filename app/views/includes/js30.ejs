
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="/dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/assets/js/ie10-viewport-bug-workaround.js"></script>
     <script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript"
          src="https://www.google.com/jsapi?autoload={
            'modules':[{
              'name':'visualization',
              'version':'1',
              'packages':['line']
            }]
          }"></script>


    <script type="text/javascript">
	
      google.setOnLoadCallback(drawDefaultChart30("T° last 30 days","/T/30","chartT30","T°","Max°","Min°","T1"));
      google.setOnLoadCallback(drawDefaultChart30("Pressure last  30 days","/PRESS/30","chartPRESS30","P mBar","Max mBar","Min mBar","PRESS"));
      google.setOnLoadCallback(drawDefaultChart30("Humidity last 30 days","/H/30","chartH30","H%","Max%","Min%","H1"));
      google.setOnLoadCallback(drawDefaultChart30("Windchill last 30 days","/WC/30","chartWC30","W°","Max°","Min°","WC"));
      google.setOnLoadCallback(drawDefaultChart30("Rain last 30 days","/RC/30","chartRC30","Rmm°","Max mm","Min mm","RC"));


      function drawDefaultChart30(title,_url,_el,leg1,leg2,leg3,field) {

	var options = {chart: {"title":title}, animation : {startup:true}};

	 $.ajax({
          url: _url,
          dataType: "JSON"
        }).done(function(data) {

		var dataTable = new google.visualization.DataTable();
		dataTable.addColumn('datetime','time');
		dataTable.addColumn('number',leg1);
		dataTable.addColumn('number',leg2);
		dataTable.addColumn('number',leg3);


	    $.each(data, function (i, row) {
		    dataTable.addRow([
		      (new Date(row.ts)),
		      parseFloat(row[field]),
		      parseFloat(row.max),
		      parseFloat(row.min)
		    ]);
		  });

		var chart = new google.charts.Line(document.getElementById(_el));
		chart.draw(dataTable, options);
	});
  
      };


    </script>

